!function(e){e.fn.columnFilter=function(t){function n(e,t,n,r,l){if("undefined"==typeof t)return new Array;"undefined"==typeof n&&(n=!0),"undefined"==typeof r&&(r=!0),"undefined"==typeof l&&(l=!0);var i;i=1==r?e.aiDisplay:e.aiDisplayMaster;for(var o=new Array,s=0,c=i.length;c>s;s++){var u=i[s],f=y.fnGetData(u),d=f[t];(1!=l||0!=d.length)&&(1==n&&jQuery.inArray(d,o)>-1||o.push(d))}return o.sort(a)}function a(e,t){var n=[],a=[];for(e.replace(/(\d+)|(\D+)/g,function(e,t,a){n.push([t||1/0,a||""])}),t.replace(/(\d+)|(\D+)/g,function(e,t,n){a.push([t||1/0,n||""])});n.length&&a.length;){var r=n.shift(),l=a.shift(),i=r[0]-l[0]||r[1].localeCompare(l[1]);if(i)return i}return n.length-a.length}function r(e){return w.bUseColVis?e:y.fnSettings().oApi._fnVisibleToColumnIndex(y.fnSettings(),e)}function l(t,n,a,l,i,o){var s="text_filter form-control";l&&(s="number_filter form-control"),v=v.replace(/(^\s*)|(\s*$)/g,"");var c=t.fnSettings().aoPreSearchCols[g].sSearch,u="search_init ",f=v;""!=c&&"^"!=c&&(f=l&&"^"==c.charAt(0)?c.substr(1):c,u="");var d=e('<input type="text" class="'+u+s+'" value="Search By '+f+'" rel="'+g+'"/>');void 0!=o&&-1!=o&&d.attr("maxlength",o),m.html(d),m.wrapInner(l?'<span class="filter_column filter_number" />':'<span class="filter_column filter_text" />'),p[g]=v;var h=g;d.keyup(l&&!t.fnSettings().oFeatures.bServerSide?function(){t.fnFilter("^"+this.value,r(h),!0,!1),x()}:function(){if(t.fnSettings().oFeatures.bServerSide&&0!=i){var l=(t.fnSettings().aoPreSearchCols[h].sSearch,e(this).data("dt-iLastFilterLength"));"undefined"==typeof l&&(l=0);var o=this.value.length;if(Math.abs(o-l)<i)return;e(this).data("dt-iLastFilterLength",o)}t.fnFilter(this.value,r(h),n,a),x()}),d.focus(function(){e(this).hasClass("search_init")&&(e(this).removeClass("search_init"),this.value="")}),d.blur(function(){""==this.value&&(e(this).addClass("search_init"),this.value="Search By "+p[h])})}function i(t){m.html(h(0));var n=t.attr("id")+"_range_from_"+g,a=e('<input type="text" class="number_range_filter form-control" id="'+n+'" rel="'+g+'"/>');m.append(a),m.append(h(1));var l=t.attr("id")+"_range_to_"+g,i=e('<input type="text" class="number_range_filter form-control" id="'+l+'" rel="'+g+'"/>');m.append(i),m.append(h(2)),m.wrapInner('<span class="filter_column filter_number_range form-control" />');var o=g;_.push(g),t.dataTableExt.afnFiltering.push(function(e,a){if(t.attr("id")!=e.sTableId)return!0;if(null==document.getElementById(n))return!0;var i=1*document.getElementById(n).value,s=1*document.getElementById(l).value,c="-"==a[r(o)]?0:1*a[r(o)];return""==i&&""==s?!0:""==i&&s>=c?!0:c>=i&&""==s?!0:c>=i&&s>=c?!0:!1}),e("#"+n+",#"+l,m).keyup(function(){var e=1*document.getElementById(n).value,a=1*document.getElementById(l).value;0!=e&&0!=a&&e>a||(t.fnDraw(),x())})}function o(t){var n=b.split(/[}{]/);m.html("");var a=t.attr("id")+"_range_from_"+g,l=e('<input type="text" class="date_range_filter form-control" id="'+a+'" rel="'+g+'"/>');l.datepicker();var i=t.attr("id")+"_range_to_"+g,o=e('<input type="text" class="date_range_filter form-control" id="'+i+'" rel="'+g+'"/>');for(ti=0;ti<n.length;ti++)m.append(n[ti]==w.sDateFromToken?l:n[ti]==w.sDateToToken?o:n[ti]);m.wrapInner('<span class="filter_column filter_date_range" />'),o.datepicker();var s=g;_.push(g),t.dataTableExt.afnFiltering.push(function(n,a){if(t.attr("id")!=n.sTableId)return!0;var i=l.datepicker("getDate"),c=o.datepicker("getDate");if(null==i&&null==c)return!0;var u=null;try{if(null==a[r(s)]||""==a[r(s)])return!1;u=e.datepicker.parseDate(e.datepicker.regional[""].dateFormat,a[r(s)])}catch(f){return!1}return null==u?!1:null==i&&c>=u?!0:u>=i&&null==c?!0:u>=i&&c>=u?!0:!1}),e("#"+a+",#"+i,m).change(function(){t.fnDraw(),x()})}function s(t,a,r,l,i,o,s,c){null==a&&(a=n(t.fnSettings(),r,!0,!1,!0));var f=r,d=t.fnSettings().aoPreSearchCols[g].sSearch;(null==d||""==d)&&(d=s);var h='<select class="search_init select_filter form-control" rel="'+g+'"><option value="" class="search_init">'+i+"</option>";c&&(h='<select class="search_init select_filter form-control" rel="'+g+'" multiple>');var p=0,v=a.length;for(p=0;v>p;p++)if("object"!=typeof a[p]){var m="";(escape(a[p])==d||escape(a[p])==escape(d))&&(m="selected "),h+="<option "+m+' value="'+escape(a[p])+'">'+a[p]+"</option>"}else{var m="";o?(a[p].value==d&&(m="selected "),h+="<option "+m+'value="'+a[p].value+'">'+a[p].label+"</option>"):(escape(a[p].value)==d&&(m="selected "),h+="<option "+m+'value="'+escape(a[p].value)+'">'+a[p].label+"</option>")}var b=e(h+"</select>");l.html(b),l.wrapInner('<span class="filter_column filter_select" />'),c?b.change(function(){""!=e(this).val()?e(this).removeClass("search_init"):e(this).addClass("search_init");var n=e(this).val(),a=[];if(null==n||n==[])var r="^(.*)$";else{e.each(n,function(e,t){a.push(u(t))});var r="^("+a.join("|")+")$"}t.fnFilter(r,f,!0,!1)}):(b.change(function(){""!=e(this).val()?e(this).removeClass("search_init"):e(this).addClass("search_init"),o?t.fnFilter(e(this).val(),r,o):t.fnFilter(unescape(e(this).val()),r),x()}),null!=d&&""!=d&&t.fnFilter(unescape(d),r))}function c(e,t,n,a,l){var i=e.fnSettings();null!=t&&"function"!=typeof t||""==i.sAjaxSource||i.oFeatures.bServerSide||i.aoDrawCallback.push({fn:function(i,o,c){return function(u){return 2!=u.iDraw||null==u.sAjaxSource||""==u.sAjaxSource||u.oFeatures.bServerSide?void 0:s(e,t&&t(u.aoData,u),r(i),o,c,n,a,l)}}(g,m,v),sName:"column_filter_"+g}),s(e,"function"==typeof t?null:t,r(g),m,v,n,a,l)}function u(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function f(t){var n,a=g,r='<div class="dropdown select_filter form-control"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+v+'<b class="caret"></b></a><ul class="dropdown-menu" role="menu"><li data-value=""><a>Show All</a></li>',l=t.length;for(n=0;l>n;n++)r+='<li data-value="'+t[n]+'"><a>'+t[n]+"</a></li>";var i=e(r+"</ul></div>");m.html(i),m.wrapInner('<span class="filterColumn filter_select" />'),i.find("li").click(function(){y.fnFilter(e(this).data("value"),a)})}function d(t,a){null==a&&(a=n(t.fnSettings(),g,!0,!0,!0));var r,l=g,i="",o=a.length,s=v.replace("%","Perc").replace("&","AND").replace("$","DOL").replace("Â£","STERL").replace("@","AT").replace(/\s/g,"_");s=s.replace(/[^a-zA-Z 0-9]+/g,"");var c=v;(null!=w.sFilterButtonText||void 0!=w.sFilterButtonText)&&(c=w.sFilterButtonText);var u=10,f=12,d=Math.floor(o/f);o%f>0&&(d+=1);var h=100/d-2,p=u*d;1==d&&(h=20);var b='<div style="float:left; min-width: '+h+'%; " >',S="</div>",_=t.attr("id")+s,k="chkBtnOpen"+_,y=_+"-flt-toggle";for(i+='<button id="'+k+'" class="checkbox_filter btn btn-default" > '+c+"</button>",i+='<div id="'+y+'" title="'+v+'" rel="'+g+'" class="toggle-check ui-widget-content ui-corner-all"  style="width: '+p+'%; " >',i+=b,r=0;o>r;r++){r%f==0&&0!=r&&(i+=S+b);var F=a[r],T=a[r];"object"==typeof a[r]&&(F=a[r].label,T=a[r].value),i+='<input class="search_init checkbox_filter btn btn-default" type="checkbox" id= "'+_+"_cb_"+T+'" name= "'+s+'" value="'+T+'" >'+F+"<br/>";var C=e(i);m.html(C),m.wrapInner('<span class="filter_column filter_checkbox" />'),C.change(function(){var n="",a="|",r=e('input:checkbox[name="'+s+'"]:checked').size();e('input:checkbox[name="'+s+'"]:checked').each(function(t){(0==t&&1==r||0!=t&&t==r-1)&&(a=""),n=n.replace(/^\s+|\s+$/g,""),n=n+e(this).val()+a,a="|"}),""!=n?e('input:checkbox[name="'+s+'"]').removeClass("search_init"):e('input:checkbox[name="'+s+'"]').addClass("search_init"),t.fnFilter(n,l,!0,!1),x()})}e("#"+k).button(),e("#"+y).dialog({autoOpen:!1,hide:"blind",buttons:[{text:"Reset",click:function(){return e('input:checkbox[name="'+s+'"]:checked').each(function(){e(this).attr("checked",!1),e(this).addClass("search_init")}),t.fnFilter("",l,!0,!1),x(),!1}},{text:"Close",click:function(){e(this).dialog("close")}}]}),e("#"+k).click(function(){e("#"+y).dialog("open");var t=e(this);return e("#"+y).dialog("widget").position({my:"top",at:"bottom",of:t}),!1});var D=x;x=function(){var t=e("#"+k);e("#"+y).dialog("widget").position({my:"top",at:"bottom",of:t}),D()}}function h(e){switch(e){case 0:return b.substring(0,b.indexOf("{from}"));case 1:return b.substring(b.indexOf("{from}")+6,b.indexOf("{to}"));default:return b.substring(b.indexOf("{to}")+4)}}var p,g,v,m,b="From {from} to {to}",S=new Array,_=new Array,x=function(){},y=this,F={sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}",sDateFromToken:"from",sDateToToken:"to"},w=e.extend(F,t);return this.each(function(){if(y.fnSettings().oFeatures.bFilter){p=new Array;var t=y.fnSettings().aoFooter[0],n=y.fnSettings().nTFoot,a="tr";if("head:after"==w.sPlaceHolder){var r=e("tr:first",y.fnSettings().nTHead).detach();y.fnSettings().bSortCellsTop?(r.prependTo(e(y.fnSettings().nTHead)),t=y.fnSettings().aoHeader[1]):(r.appendTo(e(y.fnSettings().nTHead)),t=y.fnSettings().aoHeader[0]),a="tr:last",n=y.fnSettings().nTHead}else if("head:before"==w.sPlaceHolder){if(y.fnSettings().bSortCellsTop){var r=e("tr:first",y.fnSettings().nTHead).detach();r.appendTo(e(y.fnSettings().nTHead)),t=y.fnSettings().aoHeader[1]}else t=y.fnSettings().aoHeader[0];a="tr:first",n=y.fnSettings().nTHead}for(e(t).each(function(t){g=t;var n={type:"text",bRegex:!1,bSmart:!0,iMaxLenght:-1,iFilterLength:0};if(null!=w.aoColumns){if(w.aoColumns.length<g||null==w.aoColumns[g])return;n=w.aoColumns[g]}if(v=e(e(this)[0].cell).text(),null==n.sSelector?m=e(e(this)[0].cell):(m=e(n.sSelector),0==m.length&&(m=e(e(this)[0].cell))),null!=n)switch(b=null!=n.sRangeFormat?n.sRangeFormat:w.sRangeFormat,n.type){case"null":break;case"number":l(y,!0,!1,!0,n.iFilterLength,n.iMaxLenght);break;case"select":1!=n.bRegex&&(n.bRegex=!1),c(y,n.values,n.bRegex,n.selected,n.multiple);break;case"number-range":i(y);break;case"date-range":o(y);break;case"checkbox":d(y,n.values);break;case"twitter-dropdown":case"dropdown":f(n.values);break;case"text":default:bRegex=null==n.bRegex?!1:n.bRegex,bSmart=null==n.bSmart?!1:n.bSmart,l(y,bRegex,bSmart,!1,n.iFilterLength,n.iMaxLenght)}}),j=0;j<_.length;j++){var s=function(){var t=y.attr("id");return e("#"+t+"_range_from_"+_[j]).val()+w.sRangeSeparator+e("#"+t+"_range_to_"+_[j]).val()};S.push(s)}if(y.fnSettings().oFeatures.bServerSide){var u=y.fnSettings().fnServerData;y.fnSettings().fnServerData=function(t,n,a){for(j=0;j<_.length;j++){var r=_[j];for(k=0;k<n.length;k++)n[k].name=="sSearch_"+r&&(n[k].value=S[j]())}if(n.push({name:"sRangeSeparator",value:w.sRangeSeparator}),null!=u)try{u(t,n,a,y.fnSettings())}catch(l){u(t,n,a)}else e.getJSON(t,n,function(e){a(e)})}}}})}}(jQuery);